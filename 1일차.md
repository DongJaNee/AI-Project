# 구매패턴을 통한 이탈고객 예측
### 데이터 셋 준비
데이터셋 구성 파일들

- customers.csv : 고객정보
- sales.csv : 판매정보
- products.csv : 상품정보

개발 도구
- colab
- python

### 1. 데이터 파일 업로드
```
 ! wget 'https://drive.google.com/uc?export=download&id=1TgJlz5AKMhhZOYQY7l3fNBhPbqb5ZVq4'  -O customer_churn.zip
 ! unzip customer_churn.zip
 ! ls *.csv
 customers.csv  products.csv  sales.csv
```

<img width="590" height="667" alt="image" src="https://github.com/user-attachments/assets/a1cbcf63-ff39-4d95-a7ca-27e50a6dd7f0" />

### 2-1 customers.csv에서 2014 ~ 2016년에 등록한 고객들을 골라 cust01 데이터프레임으로 저장
```
customers_df['RegisterDate'] = pd.to_datetime(customers_df['RegisterDate'])
cust01 = customers_df[(customers_df['RegisterDate'].dt.year >= 2014) & (customers_df['RegisterDate'].dt.year <= 2016)]
display(cust01.head())
```

<img width="578" height="207" alt="image" src="https://github.com/user-attachments/assets/2b18077d-2853-4de2-bebb-b03f31c4b6cc" />

### 2-2 sales.csv에서 2016년 하반기에 주문한 히스토리가 있는 고객들의 sales 정보를 골라 cust02 데이터프레임으로 저장
```
sales_df['OrderDate'] = pd.to_datetime(sales_df['OrderDate'])
cust02 = sales_df[(sales_df['OrderDate'].dt.year == 2016) & (sales_df['OrderDate'].dt.month >= 7)]
display(cust02.head())
```

<img width="605" height="198" alt="image" src="https://github.com/user-attachments/assets/d34c3f04-a52d-4bb9-aafc-18d8820ea35f" />

### 2-3 cust02에서 CustomerID가 중복된 행들은 중복 제거를 하고 다시 cust02로 저장
```
cust02 = cust02.drop_duplicates(subset=['CustomerID'])
display(cust02.head())
```


<img width="549" height="198" alt="image" src="https://github.com/user-attachments/assets/14aef0e9-c8e6-44b1-81e1-03d66943d8d7" />

### 3. cust01와 cust02 데이터프레임을 CustomerID를 기준으로, cust01과 cust02의 고객 정보가 모두 포함되도록 병합하여 cust_churn0으로 저장
```
cust_churn0 = pd.merge(cust01, cust02, on='CustomerID', how='inner')
display(cust_churn0.head())
```


<img width="882" height="196" alt="image" src="https://github.com/user-attachments/assets/a854a147-7dfc-4028-9ec5-6cd75bdea64b" />

### 4. 현재 table에 속성 churn 생성
```
# churn 컬럼의 정의: 1이면 이탈 고객, 0이면 비이탈 고객
# 초기값은 0
cust_churn0['Churn'] = 0
display(cust_churn0.head())
```


<img width="918" height="198" alt="image" src="https://github.com/user-attachments/assets/119d370b-5aa2-48ce-8288-19b3ce300b7e" />

